import{C as R,a as K,b as J}from"./index-BJCVfGh_.js";import{d as C,c as n,o as r,a as s,t as M,F as P,Q as N,P as Y,_ as $,y as c,e as g,M as _,w as f,b as T,I as v,a0 as ee,L as Z,K as w,f as te,A as b,a2 as se,Z as ie,a3 as re}from"./index-Cu7ORWtZ.js";import{S as V,a as j,P as le}from"./pagination-CroGCr9p.js";/* empty css               */import{_ as oe}from"./BaseIcon.vue_vue_type_script_setup_true_lang-Y1ZGA_hf.js";import{_ as ae}from"./BaseButton-BEwq3IU_.js";const ne={key:0,class:"file-img"},de={key:0,class:"file-img__url"},ue=["src"],ce={key:1},pe=C({__name:"FileOther",props:{id:{},url:{},noimg:{type:Boolean,default:!0}},emits:["fileLoad","deleteFile"],setup(m,{emit:d}){const t=d,o=async()=>{try{const i=await R.getPhoto({quality:85,resultType:J.DataUrl,source:K.Prompt});if(!i.dataUrl)return;const l=await(await fetch(i.dataUrl)).blob(),a=l.type.split("/")[1]||"jpg",y=new File([l],`photo.${a}`,{type:l.type});t("fileLoad",y)}catch(i){console.log("Camera cancelled or error",i)}};return(i,e)=>i.id?(r(),n("div",ne,[s("div",{class:"file-img__btn",onClick:e[0]||(e[0]=l=>t("deleteFile",i.id))},[...e[1]||(e[1]=[s("svg",{width:"33",height:"33",viewBox:"0 0 33 33",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[s("path",{d:"M29.4519 16.0645C29.4519 23.458 23.4583 29.4516 16.0648 29.4516C8.67134 29.4516 2.67773 23.458 2.67773 16.0645C2.67773 8.67104 8.67134 2.67743 16.0648 2.67743C23.4583 2.67743 29.4519 8.67104 29.4519 16.0645Z",fill:"#FF3B30"}),s("path",{d:"M7.9668 16H23.1126",stroke:"white","stroke-width":"2.00806","stroke-linecap":"round","stroke-linejoin":"round"})],-1)])]),i.noimg?(r(),n("div",de,M(i.url),1)):(r(),n(P,{key:1},[i.url?(r(),n("img",{key:0,src:i.url,alt:""},null,8,ue)):N("",!0)],64))])):(r(),n("div",ce,[(r(),n("svg",{width:"120",height:"120",viewBox:"0 0 120 120",fill:"none",xmlns:"http://www.w3.org/2000/svg",class:"tw-w-[120px] tw-h-[120px]",onClick:o},[...e[2]||(e[2]=[Y('<rect width="120" height="119.008" rx="30" fill="#E5EEF9" data-v-a14b493d></rect><g clip-path="url(#clip0_717_8169)" data-v-a14b493d><g clip-path="url(#clip1_717_8169)" data-v-a14b493d><path d="M81.5481 59.9355C81.5481 71.872 71.8716 81.5484 59.9352 81.5484C47.9987 81.5484 38.3223 71.872 38.3223 59.9355C38.3223 47.999 47.9987 38.3226 59.9352 38.3226C71.8716 38.3226 81.5481 47.999 81.5481 59.9355Z" fill="#C6D9F1" data-v-a14b493d></path><path d="M46.9668 59.9355H71.419" stroke="white" stroke-width="3.24194" stroke-linecap="round" stroke-linejoin="round" data-v-a14b493d></path><path d="M59.1934 46.9678V71.42" stroke="white" stroke-width="3.24194" stroke-linecap="round" stroke-linejoin="round" data-v-a14b493d></path></g></g><defs data-v-a14b493d><clipPath id="clip0_717_8169" data-v-a14b493d><rect width="51.871" height="51.871" fill="white" transform="translate(34 34)" data-v-a14b493d></rect></clipPath><clipPath id="clip1_717_8169" data-v-a14b493d><rect width="51.871" height="51.871" fill="white" transform="translate(34 34)" data-v-a14b493d></rect></clipPath></defs>',3)])]))]))}}),De=$(pe,[["__scopeId","data-v-a14b493d"]]),_e={key:0,width:"57",height:"57",viewBox:"0 0 57 57",fill:"none",xmlns:"http://www.w3.org/2000/svg"},ve={key:1,width:"57",height:"57",viewBox:"0 0 57 57",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Ge=C({__name:"Star2",props:{active:{type:Boolean,default:!1}},setup(m){return(d,t)=>d.active?(r(),n("svg",_e,[...t[0]||(t[0]=[s("g",{"clip-path":"url(#clip0_699_10570)"},[s("path",{d:"M28.5 46.6163L46.1138 56.0173L42.75 36.1054L57 22.0042L37.3064 19.0991L28.5 0.982819L19.6936 19.0991L0 22.0042L14.25 36.1054L10.8862 56.0173L28.5 46.6163Z",fill:"#C6D9F1"})],-1),s("defs",null,[s("clipPath",{id:"clip0_699_10570"},[s("rect",{width:"57",height:"57",fill:"white"})])],-1)])])):(r(),n("svg",ve,[...t[1]||(t[1]=[s("g",{"clip-path":"url(#clip0_699_10569)"},[s("path",{d:"M28.5 46.6163L46.1138 56.0173L42.75 36.1054L57 22.0042L37.3064 19.0991L28.5 0.982849L19.6936 19.0991L0 22.0042L14.25 36.1054L10.8862 56.0173L28.5 46.6163Z",fill:"#E5EEF9"})],-1),s("defs",null,[s("clipPath",{id:"clip0_699_10569"},[s("rect",{width:"57",height:"57",fill:"white"})])],-1)])]))}}),me={class:"stories-menu-slider__item-img"},fe=["src"],we={class:"stories-menu-slider__item-title"},ge=C({__name:"StoriesMenuSlider",props:{stories:{}},setup(m){const d=c({slidesPerView:"auto"}),t=async(o,i)=>{console.log(o,i),v().storyIndex=i,v().isStoriesActive=!0};return(o,i)=>(r(),g(_(V),{class:"stories-menu-slider","slides-per-view":_(d).slidesPerView},{default:f(()=>[(r(!0),n(P,null,T(o.stories,(e,l)=>(r(),g(_(j),{class:"stories-menu-slider__item",key:e.id,onClick:a=>t(e.id,l)},{default:f(()=>[s("div",me,[s("img",{src:e.image.url,alt:"",class:"tw-object-cover"},null,8,fe)]),s("div",we,M(e.title),1)]),_:2},1032,["onClick"]))),128))]),_:1},8,["slides-per-view"]))}}),he=$(ge,[["__scopeId","data-v-77315520"]]),Se={class:"stories-group-slider__item-body tw-container"},ye={class:"stories-group-slider__item-content"},ke={class:"stories-group-slider__item-title"},be={class:"stories-group-slider__item-description"},Ce={key:0,class:"tw-container tw-mb-6"},$e={__name:"StoriesGroupSlider",props:{mainStory:{type:Object,default:()=>({})}},emits:["prev","next"],setup(m,{emit:d}){const t=m;ee(()=>{console.log(t.mainStory)});const o=c({modules:[le],pagination:{el:".stories-group-slider__pagination",type:"bullets",clickable:!1,renderBullet:function(i,e){return'<div class="'+e+'"><span></span></div>'}}});return(i,e)=>{const l=ae;return r(),g(_(V),{class:"stories-group-slider",modules:o.value.modules,pagination:o.value.pagination},{default:f(()=>[(r(!0),n(P,null,T(m.mainStory,(a,y)=>(r(),g(_(j),{class:"stories-group-slider__item env-t",key:y,style:Z({backgroundImage:`url(${a.image?.url})`})},{default:f(()=>[s("div",Se,[s("div",ye,[s("div",ke,M(a.title),1),s("div",be,M(a.description),1)]),a.action?(r(),n("div",Ce,[w(l,{theme:"gradient",onClick:e[0]||(e[0]=x=>i.$router.push({name:"to-record"}))},{default:f(()=>[...e[3]||(e[3]=[te(" Записаться ",-1)])]),_:1})])):N("",!0)]),s("div",{class:"prev",onClick:e[1]||(e[1]=x=>i.$emit("prev"))}),s("div",{class:"next",onClick:e[2]||(e[2]=x=>i.$emit("next"))})]),_:2},1032,["style"]))),128)),e[4]||(e[4]=s("div",{class:"swiper-pagination stories-group-slider__pagination"},null,-1))]),_:1},8,["modules","pagination"])}}},xe=$($e,[["__scopeId","data-v-904b9e05"]]),Le={class:"tw-absolute tw-right-7 tw-top-7 tw-z-10 env-t"},Me={__name:"StoriesMainSlider",setup(m,{expose:d}){const t=c(null),o=c(null),i=c(5e3),e=c(500),l=c(!1);let a=c(null);const y=c(null),x=b(()=>t.value?.slides[A.value]),p=b(()=>x.value.querySelector(".stories-group-slider")),A=b(()=>t.value?.activeIndex),q=()=>{v().storyIndex=A.value},U=u=>{t.value=u,G(),D(v().storyIndex)},W=u=>{o.value=u},I=c({slidesPerView:"auto",centeredSlides:!0}),B=()=>{E(),v().isStoriesActive=!1,v().storyIndex=null},X=()=>{if(console.log("next"),!p.value.swiper.isEnd){p.value.swiper.slideNext(e.value);return}t.value.slideNext()},z=()=>{if(!p.value.swiper.isBeginning){p.value.swiper.slidePrev(e.value);return}t.value.slidePrev()};b(()=>{if(t.value)return!(p.value.swiper.isBeginning&&t.value.isBeginning)}),b(()=>{if(t.value)return!(p.value.swiper.isEnd&&t.value.isEnd)});const D=(u,L=0)=>{t.value.slideTo(u,L)},G=()=>{const u=p.value.querySelectorAll(".swiper-pagination-bullet"),L=i.value/100;u.forEach((F,k)=>{const h=F.querySelector("span");if(h.style.transform="translateX(-100%)",k===p.value.swiper.activeIndex){let S=-100;a.value=setInterval(()=>{S<0&&!l.value&&(S+=1),h.style.transform=`translateX(${S}%)`,p.value.swiper.isEnd&&S===0?(E(),t.value.isEnd&&B(),t.value.slideNext(e.value)):S===0&&p.value.swiper.slideNext(e.value)},L)}else k<p.value.swiper.activeIndex&&(h.style.transform="translateX(0%)")})},E=()=>{clearInterval(a.value)},O=()=>{t.value&&(E(),G()),q()},H=()=>{l.value=!0},Q=()=>{l.value=!1};return d({closeStory:B}),(u,L)=>{const F=oe;return r(),g(_(V),{class:"stories-main-slider",ref_key:"storiesMainSlider",ref:y,"slides-per-view":I.value.slidesPerView,centeredSlides:I.value.centeredSlides,initialSlide:I.value.initialSlide,onSwiper:U,onSlideChange:O,onTouchStart:H,onTouchEnd:Q},{default:f(()=>[(r(!0),n(P,null,T(("mainStore"in u?u.mainStore:_(v))().storyList.data,(k,h)=>(r(),g(_(j),{class:"stories-main-slider__item",style:Z({backgroundColor:k.bg}),key:h,onClick:S=>D(h,e.value)},{default:f(()=>[s("div",Le,[w(se,{round:"",flat:"",class:"",onClick:B},{default:f(()=>[w(F,{name:"close",class:"tw-w-6 tw-h-6 tw-text-white"})]),_:1})]),w(xe,{mainStory:("mainStore"in u?u.mainStore:_(v))().storyGroup.data[k.id],onSwiper:W,onSlideChange:O,onPrev:z,onNext:X},null,8,["mainStory"])]),_:2},1032,["style","onClick"]))),128))]),_:1},8,["slides-per-view","centeredSlides","initialSlide"])}}},Pe=$(Me,[["__scopeId","data-v-388e7ffd"]]),Ie=C({__name:"StoriesMainWrapper",setup(m){const{isStoriesActive:d}=ie(v()),t=c(null),o=c(null),i=e=>{const l=o.value?.$refs.storiesMainSlider.$el,a=o.value?.$refs.storiesMainSlider.$el.firstElementChild;(e.target===t.value||e.target===l||e.target===a)&&o.value.closeStory()};return(e,l)=>_(d)?(r(),n("div",{key:0,class:"stories-main-wrapper",onClick:l[0]||(l[0]=a=>i(a))},[s("div",{ref_key:"wrapperContent",ref:t,class:"stories-main-wrapper__content"},[w(Pe,{ref_key:"storiesMainSlider",ref:o},null,512)],512)])):N("",!0)}}),Be=$(Ie,[["__scopeId","data-v-0d85a773"]]),Ee={class:"tw-overflow-hidden -tw-mr-5.5"},Oe=C({__name:"Index",props:{stories:{}},setup(m){return(d,t)=>(r(),n("div",Ee,[w(he,{stories:d.stories},null,8,["stories"]),(r(),g(re,{to:"body"},[w(Be)]))]))}});export{De as _,Ge as a,Oe as b};
