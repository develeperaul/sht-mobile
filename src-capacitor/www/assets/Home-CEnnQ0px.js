import{_ as G}from"./NoInt-BlMEcizk.js";import{L as J,Q as C}from"./QSkeleton-DX1_vkpV.js";import{d as O,O as A,c as s,o as e,P as E,M as t,_ as P,a as o,Q as k,t as Q,L as K,y as x,f as D,K as c,F as w,b as f,R as N,S as U,U as H,w as h,e as _,V as X,X as Z,Y as q,I as b,Z as Y,$ as F,a0 as tt,g as et,J as ot,a1 as nt}from"./index-Cu7ORWtZ.js";import{_ as st}from"./BaseButton-BEwq3IU_.js";import{_ as it,a as rt,b as at}from"./Index.vue_vue_type_style_index_0_lang-2jb182g7.js";import{_ as lt}from"./Upcoming-CUo-bQTQ.js";import{_ as dt}from"./Direction-hmo6h9Kr.js";import{_ as j}from"./BaseIcon.vue_vue_type_script_setup_true_lang-Y1ZGA_hf.js";import{_ as ct}from"./HeadBlockProfile.vue_vue_type_script_setup_true_lang-CpGsJlm4.js";import{Q as ut}from"./QPage-CDrjN61Q.js";import{o as p}from"./ordersStore-1bvosNKe.js";import{d as M}from"./dayjs.min-DOzry9ir.js";import{S as _t,P as mt,a as pt}from"./pagination-CroGCr9p.js";import"./QSpinnerTail-Co0JQqD5.js";import"./index-BJCVfGh_.js";/* empty css               */import"./order-DYithJrC.js";import"./dayjs.min-B2iisHW2.js";const wt=""+new URL("bonus-HLG3VhGr.png",import.meta.url).href,ft=O({__name:"Bonus",setup(L){const a=A();return(v,d)=>(e(),s("div",{class:"card-bonus",onClick:d[0]||(d[0]=g=>t(a).push({name:"reg"}))},[...d[1]||(d[1]=[E('<div class="tw-py-3.5 tw-px-[18px]" data-v-3b00240e><div class="h3 tw-mb-[7px]" data-v-3b00240e>Скидка 1 000 ₽</div><div class="p2 tw-mb-3" data-v-3b00240e> за регистрацию <br data-v-3b00240e> в приложении </div><div class="card-bonus__btn" data-v-3b00240e>Получить</div></div><img src="'+wt+'" alt="" data-v-3b00240e>',2)])]))}}),vt=P(ft,[["__scopeId","data-v-3b00240e"]]),gt={class:"card-raffle"},bt={class:"card-raffle__content"},ht={key:0,class:"card-raffle__label"},kt=["innerHTML"],yt=["innerHTML"],$t=O({__name:"Raffle",props:{promotion:{}},setup(L){return(a,v)=>(e(),s("div",gt,[o("div",bt,[a.promotion.label?(e(),s("div",ht,Q(a.promotion.label),1)):k("",!0),o("div",null,[o("div",{class:"h1 tw-uppercase tw-text-center tw-mb-2",innerHTML:a.promotion.title},null,8,kt),o("div",{class:"p2 tw-text-center",innerHTML:a.promotion.description},null,8,yt)])]),a.promotion.image?(e(),s("div",{key:0,class:"card-raffle__bg",style:K({backgroundImage:`url(${a.promotion.image.url})`})},null,4)):k("",!0)]))}}),St=P($t,[["__scopeId","data-v-0627a935"]]),xt={key:0},Mt={key:1,class:"card-review review"},Dt={class:"review__title tw-mb-6"},Lt={class:"tw-flex tw-justify-center tw-gap-[11px] tw-mb-6"},Rt={class:"tw-flex tw-gap-1 tw-justify-items-start tw-overflow-auto tw-mb-6 tw-pt-2.5 no-scrollbar"},Bt=O({__name:"Review2",props:{direction__uuid:{},title:{}},setup(L){const a=x(0),v=L,d=x(""),g=x(""),y=x(!1),T=()=>{X(v.direction__uuid,{rating:a.value,description:d.value,how_found_us:g.value,image_ids:i.value.map(m=>m.id)}).then(()=>y.value=!0)},i=x([]),l=async m=>{try{const n=(await Z(m)).data.image;i.value=[...i.value,n]}catch(n){throw n}},$=async(m,n)=>{try{await q(n),i.value.splice(m,1)}catch(S){throw S}};return(m,n)=>{const S=rt,R=it,V=st;return t(y)?(e(),s("div",xt,[...n[2]||(n[2]=[o("div",{class:"card-review"},[o("div",{class:"h3 tw-font-semibold tw-text-center tw-mb-4"}," Отзыв отправлен! "),o("div",{class:"p2 tw-text-center tw-mb-4"},[D(" Спасибо, что нашли время и поделились. "),o("br"),D(" Это помогает стать нам лучше. ")])],-1)])])):(e(),s("div",Mt,[o("div",Dt,"Оцените поездку на "+Q(m.title),1),o("div",Lt,[(e(),s(w,null,f(5,u=>c(S,{onClick:B=>a.value=u,active:t(a)>=u},null,8,["onClick","active"])),64))]),o("div",null,[N(o("textarea",{"onUpdate:modelValue":n[0]||(n[0]=u=>H(d)?d.value=u:null),class:"review__input",placeholder:"Расскажите немного о поездке — где были, когда, что особенно запомнилось и как всё прошло для вас?"},null,512),[[U,t(d)]]),N(o("textarea",{"onUpdate:modelValue":n[1]||(n[1]=u=>H(g)?g.value=u:null),class:"review__input",placeholder:"Как вы узнали о TeamTravel и почему решили доверить организацию вашего путешествия нам? "},null,512),[[U,t(g)]])]),n[4]||(n[4]=o("div",{class:"tw-mb-2 p1"},"Прикрепите фото",-1)),o("div",Rt,[c(R,{onFileLoad:l,class:"tw-shrink-0"}),(e(!0),s(w,null,f(t(i),(u,B)=>(e(),_(R,{onDeleteFile:I=>$(B,I),id:u.id,url:u.url??"",noimg:!1,class:"tw-shrink-0"},null,8,["onDeleteFile","id","url"]))),256))]),c(V,{onClick:T},{default:h(()=>[...n[3]||(n[3]=[D(" Оставить отзыв ",-1)])]),_:1})]))}}}),Ot=P(Bt,[["__scopeId","data-v-b617d713"]]),Tt={class:"tw-w-11 tw-h-11 tw-rounded-full tw-bg-geen_btn tw-grid tw-place-content-center"},Vt={class:"tw-grid tw-gap-8"},It={key:0,class:"tw-flex tw-gap-3 tw-overflow-auto no-scrollbar"},Ct={class:"tw-grid"},Yt={class:"tw-flex tw-items-center tw-justify-between tw-mb-3"},Ft={key:0,class:"tw-flex tw-gap-3 tw-overflow-auto no-scrollbar"},Pt={key:1,class:"tw-overflow-hidden"},Nt={class:"tw-flex tw-gap-3 tw-overflow-auto no-scrollbar"},se=O({__name:"Home",setup(L){const a=b(),{storyList:v}=Y(a),{directions:d,filters:g}=Y(F()),{ordersUpcoming:y}=Y(p()),T={el:".swiper-pagination",type:"bullets",clickable:!1,dynamicBullets:!0,dynamicMainBullets:5,center:!0,renderBullet:function(i,l){return'<div class="'+l+'"><span></span></div>'}};return tt(async()=>{const i=localStorage.getItem("countStart");if(i&&JSON.parse(i)=="1"){console.log("sss");try{await Promise.allSettled([b().getStories(),F().setDirections(),F().setFilters(),b().setPromotion()])}catch($){throw $}}et()&&p().setOrder("upcoming")}),(i,l)=>{const $=ct,m=j,n=ot("router-link"),S=j,R=dt,V=lt,u=Ot,B=St,I=vt,z=J,W=G;return e(),_(ut,{class:"tw-container"},{default:h(()=>[c($,{class:"tw-mb-[17px]"}),("mainStore"in i?i.mainStore:t(b))().isOnline?(e(),_(z,{key:0},{default:h(()=>[o("div",null,[t(p)().urlOrderPending?(e(),s("div",{key:0,class:"tw-flex tw-items-center tw-justify-between tw-p-3 tw-rounded-[24px] p1 tw-bg-white tw-mb-8",onClick:l[0]||(l[0]=r=>t(p)().openURL(t(p)().urlOrderPending))},[l[1]||(l[1]=D(" Внесите предоплату ",-1)),o("div",Tt,[c(m,{name:"chevronright",class:"tw-w-4 tw-h-4"})])])):k("",!0),o("div",Vt,[t(v).loading?(e(),s("div",It,[(e(),s(w,null,f(10,r=>c(C,{class:"tw-rounded-32 tw-shrink-0",width:"95px",height:"95px"})),64))])):(e(),_(at,{key:1,stories:t(v).data},null,8,["stories"])),o("div",Ct,[o("div",Yt,[c(n,{to:{name:"directions"},class:"p1"},{default:h(()=>[...l[2]||(l[2]=[D("Все направления",-1)])]),_:1}),c(S,{name:"chevronright",class:"tw-text-gray_icon tw-w-4 tw-h-4"})]),t(d).loading?(e(),s("div",Ft,[(e(),s(w,null,f(1,r=>c(C,{class:"tw-rounded-32 tw-shrink-0",width:"100%",height:"400px"})),64))])):(e(),s("div",Pt,[c(t(_t),{modules:[t(mt)],"slides-per-view":1,"space-between":20,pagination:T,class:"slider slider-other !tw-pb-8"},{default:h(()=>[(e(!0),s(w,null,f(t(d).data,r=>(e(),_(t(pt),{key:r.id,src:"",class:"slider__slide"},{default:h(()=>[c(R,{direction:r,class:"tw-shrink-0"},null,8,["direction"])]),_:2},1024))),128)),l[3]||(l[3]=o("div",{class:"swiper-pagination"},null,-1))]),_:1},8,["modules"])]))]),o("div",Nt,[t(y).loading?(e(),s(w,{key:0},f(10,r=>c(C,{class:"tw-rounded-32 tw-shrink-0",width:"100%",height:"242px"})),64)):(e(!0),s(w,{key:1},f(t(y).data,r=>(e(),_(V,{to:{name:"upcoming",params:{uuid:r.id}},title:"Предстоящее путешествие с Team Travel",dates:`${t(M)(r.offer.start_date).locale("ru").format("DD MMMM")}-${t(M)(r.offer.end_date).locale("ru").format("DD MMMM")}`,img:r.offer.direction.background?.url,name:r.offer.direction.name,status:r.status,diff:t(M)(t(M)(r.offer.end_date).format("YYYY-MM-DD")).locale("ru").diff(t(M)(r.offer.start_date).format("YYYY-MM-DD"),"day",!0),class:"tw-shrink-0 tw-w-full"},null,8,["to","dates","img","name","status","diff"]))),256))]),t(p)().isOrderWaitingReview?(e(),_(u,{key:2,title:t(p)().isOrderWaitingReview?.offer.direction.name,direction__uuid:t(p)().isOrderWaitingReview?.offer.direction.id},null,8,["title","direction__uuid"])):k("",!0),("mainStore"in i?i.mainStore:t(b))().promotion?(e(),_(B,{key:3,promotion:("mainStore"in i?i.mainStore:t(b))().promotion},null,8,["promotion"])):k("",!0),t(nt)().profile===null?(e(),_(I,{key:4})):k("",!0)])])]),_:1})):(e(),_(W,{key:1}))]),_:1})}}});export{se as default};
