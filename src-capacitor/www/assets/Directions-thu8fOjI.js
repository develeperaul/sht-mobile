import{_ as P}from"./BaseButton-BEwq3IU_.js";import{_ as T}from"./BaseInput-obryhwg8.js";import{_ as R}from"./BaseButtonFiltr-Dz1e1ZbQ.js";import{_ as U}from"./NoInt-BlMEcizk.js";import{_ as A}from"./Direction-hmo6h9Kr.js";import{_ as E}from"./BaseIcon.vue_vue_type_script_setup_true_lang-Y1ZGA_hf.js";import{_ as K}from"./HeadBlock.vue_vue_type_script_setup_true_lang-EQZJWHOA.js";import{d as Z,Z as q,$ as N,y as w,B as G,A as H,a0 as J,e as g,o as l,w as c,K as u,c as r,R as W,M as s,I as X,F as p,a as e,n as _,f as m,b,t as y,Q as tt,a7 as et}from"./index-Cu7ORWtZ.js";import{Q as st,L as nt}from"./QSkeleton-DX1_vkpV.js";import{Q as ot}from"./QPage-CDrjN61Q.js";import{d as D}from"./dayjs.min-DOzry9ir.js";import"./QSpinnerTail-Co0JQqD5.js";import"./vee-validate-DgmE1SLv.js";import"./dayjs.min-B2iisHW2.js";const lt={class:"tw-flex tw-overflow-auto tw-gap-1 tw-mb-6 no-scrollbar"},at={class:"tab__icon"},it={class:""},rt=["onClick"],dt={class:"tab-min__icon"},ct=["src"],ut={class:"tw-grid tw-gap-2"},_t={key:1},mt={class:"popupfilter env-t env-b"},pt={class:"popupfilter__wrapper"},wt={class:"popupfilter__top tw-flex tw-justify-between tw-mb-5"},ft={key:0,class:"tw-grid tw-gap-3"},vt={class:"tw-inline-flex tw-justify-start tw-overflow-auto no-scrollbar"},gt={class:"tw-inline-flex tw-justify-start tw-overflow-auto no-scrollbar"},bt={class:"tw-flex tw-gap-1 tw-mb-4"},yt={class:"tw-font-montserrat tw-mt-2"},kt={class:"content__block"},xt={class:"tw-flex tw-flex-wrap tw-gap-2 tw-overflow-hidden"},Ct={class:"content__btns"},ht={class:"tw-flex tw-gap-1 tw-mb-4"},$t={class:"tw-font-montserrat tw-mt-2"},Vt={class:"content__block"},zt={class:"tw-flex tw-flex-wrap tw-gap-2 tw-overflow-hidden"},Bt={class:"content__btns"},Nt={class:"tw-bg-blue_bg tw-p-5 tw-rounded-32"},Ft={class:"tw-grid tw-grid-cols-[1fr_1fr] tw-justify-center tw-justify-items-center"},jt={class:"tw-flex tw-items-center tw-gap-1"},Ot={class:"tw-bg-blue_bg tw-p-5 tw-rounded-32"},St={class:"tw-flex tw-flex-wrap tw-gap-2"},Gt=Z({__name:"Directions",setup(Dt){const{directions:$,filters:i}=q(N()),k=w("all"),o=w({days_count_from:null,days_count_to:null,is_weekend:0,month:null,name:null,price_from:"",price_to:"",year:null,type:null}),F=w("");w("");const V=w([]);G(F,a=>{a?V.value=i.value.data?.years[a]?.map(t=>({id:t,name:t})):V.value=[]}),H(()=>{});const d=(a,t,f)=>{a==="year"&&(F.value=t),console.log(t),o.value.hasOwnProperty(a)&&(o.value[a]=t,f?(o.value={days_count_from:null,days_count_to:null,is_weekend:0,month:null,name:null,price_from:"",price_to:"",year:null,type:t},O(),k.value="other"):(o.value.type=null,k.value="filter"))},j=async()=>{o.value={days_count_from:null,days_count_to:null,is_weekend:0,month:null,name:null,price_from:"",price_to:"",year:null,type:null},k.value="all",await N().setDirections(),x.value=!1},x=w(!1),O=async()=>{let a={};for(const t in o.value)if(Object.prototype.hasOwnProperty.call(o.value,t)){const f=o.value[t];f!==null&&(console.log(f,t),a[t]=f)}console.log(a),await N().setDirections(a),x.value=!1},L=a=>{x.value=!0},z=w(null),B=w(null);J(()=>{});const C=(a,t)=>{t==="open"&&a.classList.add("active"),t==="close"&&a.classList.remove("active")};return(a,t)=>{const f=K,M=E,Q=A,Y=U,v=R,S=T,I=P;return l(),g(ot,{class:"tw-container"},{default:c(()=>[u(f,{title:"Направления",class:"tw-mb-3"}),("mainStore"in a?a.mainStore:s(X))().isOnline?(l(),r(p,{key:0},[e("div",lt,[e("div",{class:_(["tab-min tw-shrink-0",{active:s(k)==="all"}]),onClick:t[0]||(t[0]=()=>{j()})}," Все ",2),e("div",{class:_(["tab-min tw-shrink-0",{active:s(k)==="filter"}]),onClick:t[1]||(t[1]=n=>L("filter"))},[e("div",at,[e("div",it,[u(M,{name:"filter",class:"tw-w-6 tw-h-6 tw-text-dark"})])]),t[12]||(t[12]=m(" Фильтры ",-1))],2),(l(!0),r(p,null,b(s(i).data?.types,n=>(l(),r("div",{class:_(["tab-min tw-shrink-0",{active:s(o).type==n.value}]),onClick:h=>d("type",n.value,!0)},[e("div",dt,[e("img",{src:n.image},null,8,ct)]),m(" "+y(n.title),1)],10,rt))),256))]),e("div",ut,[s($).loading?(l(),r(p,{key:0},b(1,n=>u(st,{class:"tw-rounded-32 tw-shrink-0",width:"100%",height:"257px"})),64)):(l(),r(p,{key:1},[s($).data.length>0?(l(!0),r(p,{key:0},b(s($).data,n=>(l(),g(nt,{key:n.id},{default:c(()=>[u(Q,{size:"sm",direction:n},null,8,["direction"])]),_:2},1024))),128)):(l(),r("div",_t,[...t[13]||(t[13]=[e("div",{class:"tw-text-center p1"}," Нет доступных направлений в этих датах, но вы можете заказать индивидуальное путешествие или попробуйте выбрать другие даты ",-1)])]))],64))])],64)):(l(),g(Y,{key:1})),W(e("div",mt,[e("div",pt,[e("div",wt,[e("div",{class:"p2 tw-text-gray_main tw-underline",onClick:t[2]||(t[2]=n=>x.value=!1)}," Закрыть "),t[14]||(t[14]=e("div",{class:"p1"},"Фильтры",-1)),e("div",{class:"p2 tw-text-[#16161680] tw-underline",onClick:j}," Сбросить все ")]),s(i).data?(l(),r("div",ft,[e("div",vt,[(l(!0),r(p,null,b(Object.keys(s(i).data?.years),n=>(l(),g(v,{onClick:h=>d("year",n),class:_({active:s(o).year==n}),size:"lg"},{default:c(()=>[m(y(s(D)().locale("ru").year(Number(n)).format("YYYY")),1)]),_:2},1032,["onClick","class"]))),256))]),e("div",gt,[(l(!0),r(p,null,b(s(V),n=>(l(),g(v,{onClick:h=>d("month",n.name),class:_({active:s(o).month==n.name}),size:"lg"},{default:c(()=>[m(y(s(D)().locale("ru").month(Number(n.name)-1).format("MMMM")),1)]),_:2},1032,["onClick","class"]))),256))]),e("div",{ref_key:"rush",ref:z,class:"tw-bg-blue_bg tw-p-5 tw-rounded-32 content"},[e("div",bt,[t[15]||(t[15]=e("span",{class:"p1"},"Направления по России",-1)),e("sup",yt,y(s(i).data?.directions.locals.length),1)]),e("div",kt,[e("div",xt,[(l(!0),r(p,null,b(s(i).data?.directions.locals,n=>(l(),g(v,{onClick:h=>d("name",n.name),class:_({active:s(o).name==n.name}),size:"lg"},{default:c(()=>[m(y(n.name),1)]),_:2},1032,["onClick","class"]))),256))])]),e("div",Ct,[e("div",{class:"content__btn add p1 tw-underline",onClick:t[3]||(t[3]=n=>C(s(z),"open"))}," Посмотреть все "),e("div",{class:"content__btn hide p1 tw-underline",onClick:t[4]||(t[4]=n=>C(s(z),"close"))}," Скрыть ")])],512),e("div",{ref_key:"other",ref:B,class:"tw-bg-blue_bg tw-p-5 tw-rounded-32 content"},[e("div",ht,[t[16]||(t[16]=e("span",{class:"p1"},"Направления по зарубежу и СНГ",-1)),e("sup",$t,y(s(i).data?.directions.foreign.length),1)]),e("div",Vt,[e("div",zt,[(l(!0),r(p,null,b(s(i).data?.directions.foreign,n=>(l(),g(v,{onClick:h=>d("name",n.name),class:_({active:s(o).name==n.name}),size:"lg"},{default:c(()=>[m(y(n.name),1)]),_:2},1032,["onClick","class"]))),256))])]),e("div",Bt,[e("div",{class:"content__btn add p1 tw-underline",onClick:t[5]||(t[5]=n=>C(s(B),"open"))}," Посмотреть все "),e("div",{class:"content__btn hide p1 tw-underline",onClick:t[6]||(t[6]=n=>C(s(B),"close"))}," Скрыть ")])],512),e("div",Nt,[t[18]||(t[18]=e("div",{class:"tw-flex tw-gap-1 tw-mb-4"},[e("span",{class:"p1"},"Стоимость в ₽")],-1)),e("div",Ft,[e("div",jt,[u(S,{name:"min",modelValue:s(o).price_from,"onUpdate:modelValue":t[7]||(t[7]=n=>s(o).price_from=n),placeholder:Number(s(i).data.prices.min).toFixed(0),min:Number(s(i).data.prices.min).toFixed(0),type:"number"},null,8,["modelValue","placeholder","min"]),t[17]||(t[17]=e("div",{class:"tw-pr-1"},"–",-1))]),u(S,{name:"max",modelValue:s(o).price_to,"onUpdate:modelValue":t[8]||(t[8]=n=>s(o).price_to=n),placeholder:Number(s(i).data.prices.max).toFixed(0),max:Number(s(i).data.prices.max).toFixed(0),type:"number"},null,8,["modelValue","placeholder","max"])])]),e("div",Ot,[t[22]||(t[22]=e("div",{class:"tw-flex tw-gap-1 tw-mb-4"},[e("span",{class:"p1"},"Количество дней")],-1)),e("div",St,[u(v,{size:"lg",onClick:t[9]||(t[9]=n=>d("is_weekend",1)),class:_({active:s(o).is_weekend==1})},{default:c(()=>[...t[19]||(t[19]=[m(" Туры выходного дня ",-1)])]),_:1},8,["class"]),u(v,{size:"lg",onClick:t[10]||(t[10]=()=>{d("days_count_from",7),d("days_count_to",99)}),class:_({active:s(o).days_count_from==7})},{default:c(()=>[...t[20]||(t[20]=[m(" От 7 дней ",-1)])]),_:1},8,["class"]),u(v,{size:"lg",onClick:t[11]||(t[11]=()=>{d("days_count_from",0),d("days_count_to",7)}),class:_({active:s(o).days_count_from==0})},{default:c(()=>[...t[21]||(t[21]=[m(" До 7 дней ",-1)])]),_:1},8,["class"])])]),u(I,{onClick:O},{default:c(()=>[...t[23]||(t[23]=[m(" Применить ",-1)])]),_:1})])):tt("",!0)])],512),[[et,s(x)]])]),_:1})}}});export{Gt as default};
