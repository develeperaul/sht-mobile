import{b as m}from"./index-3fevySbJ.js";import{i as l}from"./index-Cu7ORWtZ.js";const v={min:10,max:64,lineHeight:"normal",precision:.5};function d(t){return t.scrollWidth<=t.clientWidth&&t.scrollHeight<=t.clientHeight}function u(t,i,e){t.style.fontSize=`${i}px`,e==="normal"?t.style.lineHeight="":t.style.lineHeight=`${i*e}px`}async function c(t,i={}){const{min:e,max:n,precision:o,lineHeight:r}={...v,...i};if((t.clientWidth===0||t.clientHeight===0)&&(await l(),t.clientWidth===0||t.clientHeight===0)||(u(t,n,r),d(t))||(u(t,e,r),!d(t)))return;let s=e,a=n;for(;a-s>o;){const f=(s+a)/2;u(t,f,r),d(t)?s=f:a=f}u(t,s,r)}function b(t,i){const e={opts:i.value||{}};t.__fitText=e,e.resizeObs=new ResizeObserver(()=>c(t,e.opts)),e.resizeObs.observe(t),e.mutationObs=new MutationObserver(()=>c(t,e.opts)),e.mutationObs.observe(t,{childList:!0,subtree:!0,characterData:!0}),requestAnimationFrame(()=>c(t,e.opts))}const p={mounted:b,updated(t,i){const e=t.__fitText;e.opts=i.value||{},c(t,e.opts)},unmounted(t){const i=t.__fitText;i?.resizeObs?.disconnect(),i?.mutationObs?.disconnect(),delete t.__fitText}},h=m(({app:t})=>{t.directive("pretty",{mounted:function(n,o,r){n.textContent=t.config.globalProperties.$pretty(o.value)},updated:function(n,o,r){n.textContent=t.config.globalProperties.$pretty(o.value)}}),t.directive("amount-pretty",{mounted:function(n,o,r){n.textContent=i(o.value)},updated:function(n,o,r){n.textContent=i(o.value)}}),t.directive("amount-sq-pretty",{mounted:function(n,o,r){n.textContent=e(o.value)}}),t.directive("fit-text",p);function i(n){return t.config.globalProperties.$pretty(n,"₽")}function e(n){return t.config.globalProperties.$pretty(n,"₽/м²")}});export{h as default};
