import{_ as K,a as lt,b as rt}from"./Index.vue_vue_type_style_index_0_lang-2jb182g7.js";import{_ as X}from"./BaseButton-BEwq3IU_.js";import{_ as Z}from"./BaseIcon.vue_vue_type_script_setup_true_lang-Y1ZGA_hf.js";import{d as q,ak as dt,y as p,aj as ut,e as f,o as a,a3 as ct,K as u,w as _,c as i,Q as l,M as t,a as e,f as y,t as g,F as x,b as D,R as O,S as A,U as B,aa as pt,V as wt,X as _t,Y as G,_ as mt,O as vt,A as P,Z as ft,$ as E,a0 as bt,I as J,J as gt,a6 as ht,n as yt}from"./index-Cu7ORWtZ.js";import{_ as kt}from"./TabBody.vue_vue_type_script_lang-O93Jb9JJ.js";import{_ as xt,a as $t}from"./SliderHotels.vue_vue_type_script_setup_true_lang-wa73ie7Q.js";import{_ as Mt}from"./TabContent.vue_vue_type_script_setup_true_lang-Bh_BvA_G.js";import{_ as Dt}from"./BaseButtonFiltr-Dz1e1ZbQ.js";import{_ as Vt}from"./HeadBlock.vue_vue_type_script_setup_true_lang-EQZJWHOA.js";import{Q as Ct}from"./QPage-CDrjN61Q.js";import{d as C}from"./dayjs.min-DOzry9ir.js";import{a as j,u as Bt}from"./order-DYithJrC.js";import{o as Tt}from"./ordersStore-1bvosNKe.js";import"./index-BJCVfGh_.js";import"./pagination-CroGCr9p.js";/* empty css               */import"./QSpinnerTail-Co0JQqD5.js";import"./Slider-GC92gZhl.js";/* empty css                   */import"./dayjs.min-B2iisHW2.js";const Ft={key:0,class:"popup"},Rt={key:0,class:"popup__wrapper env-b"},Lt={key:1,class:"popup__wrapper env-b"},St={class:"popup__content review"},Yt={class:"review__title tw-mb-6"},Nt={class:"popup__content--wrapper"},Ut={class:"tw-flex tw-justify-center tw-gap-[11px] tw-mb-6"},zt={class:"tw-mb-4"},It={class:"tw-flex tw-gap-1 tw-justify-items-start tw-overflow-auto tw-mb-6 tw-pt-2.5 no-scrollbar"},Pt=q({__name:"ReviewPopup",props:dt({direction__uuid:{},title:{}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(T){const b=p(0),Y=T,h=ut(T,"modelValue"),$=p(""),m=p(""),F=p(!1),N=()=>{wt(Y.direction__uuid,{rating:b.value,description:$.value,how_found_us:m.value,image_ids:k.value.map(v=>v.id)}).then(()=>F.value=!0)},k=p([]),M=async v=>{try{const n=(await _t(v)).data.image;k.value=[...k.value,n]}catch(n){throw n}},s=async(v,n)=>{try{await G(n),k.value.splice(v,1)}catch(d){throw d}};return(v,n)=>{const d=Z,V=X,R=lt,L=K;return a(),f(ct,{to:"body"},[u(pt,{name:"fade"},{default:_(()=>[h.value?(a(),i("div",Ft,[t(F)?(a(),i("div",Rt,[u(d,{name:"close",class:"popup__close tw-mr-0 tw-ml-auto",onClick:n[0]||(n[0]=c=>h.value=!1)}),e("div",null,[n[6]||(n[6]=e("div",{class:"h3 tw-font-semibold tw-text-center tw-mb-4"}," Отзыв отправлен! ",-1)),n[7]||(n[7]=e("div",{class:"p2 tw-text-center tw-mb-4"},[y(" Спасибо, что нашли время и поделились. "),e("br"),y(" Это помогает стать нам лучше. ")],-1)),u(V,{onClick:n[1]||(n[1]=c=>h.value=!1)},{default:_(()=>[...n[5]||(n[5]=[y(" Закрыть ",-1)])]),_:1})])])):(a(),i("div",Lt,[u(d,{name:"close",class:"popup__close tw-mr-0 tw-ml-auto tw-mb-6",onClick:n[2]||(n[2]=c=>h.value=!1)}),e("div",St,[e("div",Yt," Оцените поездку на "+g(v.title),1),e("div",Nt,[e("div",Ut,[(a(),i(x,null,D(5,c=>u(R,{onClick:S=>b.value=c,active:t(b)>=c},null,8,["onClick","active"])),64))]),e("div",zt,[O(e("textarea",{"onUpdate:modelValue":n[3]||(n[3]=c=>B($)?$.value=c:null),class:"review__input",placeholder:"Расскажите немного о поездке — где были, когда, что особенно запомнилось и как всё прошло для вас?"},null,512),[[A,t($)]]),O(e("textarea",{"onUpdate:modelValue":n[4]||(n[4]=c=>B(m)?m.value=c:null),class:"review__input",placeholder:"Как вы узнали о TeamTravel и почему решили доверить организацию вашего путешествия нам? "},null,512),[[A,t(m)]])]),n[8]||(n[8]=e("div",{class:"p1"},"Прикрепите фото",-1)),e("div",It,[u(L,{onFileLoad:M,class:"tw-shrink-0"}),(a(!0),i(x,null,D(t(k),(c,S)=>(a(),f(L,{onDeleteFile:U=>s(S,U),id:c.id,url:c.url??"",noimg:!1,class:"tw-shrink-0"},null,8,["onDeleteFile","id","url"]))),256))])]),u(V,{class:"tw-mt-2",onClick:N},{default:_(()=>[...n[9]||(n[9]=[y(" Оставить отзыв ",-1)])]),_:1})])]))])):l("",!0)]),_:1})])}}}),jt=mt(Pt,[["__scopeId","data-v-df6ae66c"]]),Ot={class:"tw-pb-[100px]"},Ht={key:0},Qt={key:1},At={class:"tw-flex tw-gap-1 tw-mb-3"},Et={class:"p1 tw-text-white tw-bg-[#1616160D] tw-w-fit tw-py-[6.55px] tw-px-[13.11px] tw-rounded-[19.66px]"},Jt={class:"p1 tw-text-white tw-bg-[#1616160D] tw-w-fit tw-py-[6.55px] tw-px-[13.11px] tw-rounded-[19.66px]"},Kt={class:"h1 tw-mb-2"},Xt={class:"p1 tw-mb-3"},Zt={class:"tw-flex tw-gap-2 tw-mb-3"},qt={key:0,class:"card-white"},Gt={class:"tw-grid tw-grid-cols-2"},Wt={class:"tw-grid tw-gap-3"},te={class:"h2"},ee={class:"tw-grid tw-gap-3"},se={class:"h2"},oe={class:"p1"},ae={key:0,class:"tw-mt-6"},ne={class:"tw-flex tw-gap-2"},ie=["href"],le=["href"],re={key:1,class:"tw-mt-6"},de={class:"tw-flex tw-flex-wrap tw-gap-2 tw-justify-items-start"},ue={class:"tw-grid tw-gap-3 tw-mt-3"},ce={key:1,class:"tw-grid tw-gap-3"},pe={key:0,class:"tw-bg-white tw-p-5 tw-rounded-32"},we={class:"tw-bg-white tw-p-5 tw-rounded-32"},_e={class:"tw-mb-3"},me={class:"tw-overflow-hidden"},ve={key:0},fe={class:"tw-relative tw-h-[250px] tw-rounded-[30px] tw-overflow-hidden"},be=["innerHTML"],ge={key:1,class:"tw-bg-white tw-p-5 tw-rounded-32"},he={class:"p1 tw-list-disc tw-space-y-2 tw-pl-3 marker:tw-text-[0.7em] tw-grid tw-gap-3"},ye={key:2,class:"tw-bg-white tw-p-5 tw-rounded-32"},ke={class:"tw-list-disc tw-space-y-2 tw-pl-3 marker:tw-text-[0.7em] tw-grid tw-gap-3"},Qe=q({__name:"Upcoming",props:{offerProps:{},uuid:{}},setup(T){const b=T,Y=vt(),h=p("obsh"),$=p([{id:"obsh",name:"Общая информация"},{id:"local",name:"Подробнее"}]),m=p("prozhivanie"),F=p([{id:"prozhivanie",name:"Проживание"},{id:"pitanie",name:"Питание"},{id:"transport",name:"Транспорт"}]),N=p(""),k=async w=>{try{N.value=(await Bt(b.uuid,w)).data.id,s.value=(await j(b.uuid)).data}catch(o){throw o}},M=p(!1),s=p(),v=p(!1),n=P(()=>{if(s.value&&s.value.status==="fresh")return"Новый";if(s.value&&s.value.status==="paid")return"Оплачено";if(s.value&&s.value.status==="pending")return"Ожидает предоплаты";if(s.value&&s.value.status==="cancelled")return"Отменен";if(s.value&&s.value.status==="waiting_review")return"Ожидает отзыва";if(s.value&&s.value.status==="completed")return"Завершен"}),{direction:d,transportData:V,powerData:R}=ft(E());bt(async()=>{b.offerProps?s.value=b.offerProps:(v.value=!0,s.value=(await j(b.uuid)).data,v.value=!1),s.value&&(await E().setDirection(s.value.offer.direction.id),s.value.offer.direction.background?J().bg=s.value.offer.direction.background.url:J().bg="")});const L=P(()=>{let w=0;return s.value&&(w=C(C(s.value.offer.end_date).format("YYYY-MM-DD")).locale("ru").diff(C(s.value.offer.start_date).format("YYYY-MM-DD"),"day",!0)),`${w} ${Number(w)==1?"день":Number(w)>=2&&Number(w)<=4?"дня":"дней"}`}),c=P(()=>s.value?`${C(s.value.offer.start_date).locale("ru").format("DD MMMM")}-${C(s.value.offer.end_date).locale("ru").format("DD MMMM")}`:""),S=async w=>{try{G(w),s.value=(await j(b.uuid)).data}catch(o){throw o}},U=w=>{Browser.open({url:w}),Browser.addListener("browserFinished",()=>{}),Y.push({name:"orders"})};return(w,o)=>{const W=Vt,tt=Dt,H=K,z=X,et=gt("tab-head"),st=xt,ot=Z,I=Mt,Q=$t,at=kt,nt=jt,it=ht("amount-pretty");return a(),f(Ct,{class:"tw-container bg"},{default:_(()=>[e("div",Ot,[u(W,{title:"Team Travel",class:"tw-mb-3",theme:"white"}),t(v)?(a(),i("div",Ht,"Загрузка")):l("",!0),t(s)?(a(),i("div",Qt,[e("div",At,[e("div",Et,g(t(L)),1),e("div",Jt,g(t(c)),1)]),e("div",Kt,g(t(s).offer.direction.name),1),e("div",Xt,g(t(s).offer.direction.title),1),e("div",Zt,[(a(!0),i(x,null,D(t($),r=>(a(),f(tt,{class:yt({active:r.id==t(h)}),size:"lg",onClick:xe=>h.value=r.id},{default:_(()=>[y(g(r.name),1)]),_:2},1032,["class","onClick"]))),256))]),t(h)==="obsh"?(a(),i("div",qt,[e("div",Gt,[e("div",Wt,[o[6]||(o[6]=e("div",{class:"h3"},"Стоимость",-1)),O(e("div",te,null,512),[[it,t(s).final_price]])]),e("div",ee,[o[7]||(o[7]=e("div",{class:"h3"},"Статус",-1)),e("div",se,g(t(n)),1)])]),o[14]||(o[14]=e("div",{class:"tw-border-b tw-border-blue_bg tw-my-3"},null,-1)),e("div",oe,g(t(s).offer.description),1),t(s).voucher_url||t(s).contract_url?(a(),i("div",ae,[o[8]||(o[8]=e("div",{class:"h3 tw-font-bold tw-mb-3"},"Документы",-1)),e("div",ne,[t(s).voucher_url?(a(),i("a",{key:0,href:t(s).voucher_url,class:"tw-w-[120px] tw-h-[120px] tw-rounded-32 tw-bg-blue_bg p1 tw-grid tw-place-content-center"}," Ваучер.pdf ",8,ie)):l("",!0),t(s).contract_url?(a(),i("a",{key:1,href:t(s).contract_url,class:"tw-w-[120px] tw-h-[120px] tw-rounded-32 tw-bg-blue_bg p1 tw-grid tw-place-content-center"}," Договор.pdf ",8,le)):l("",!0)])])):l("",!0),t(s).status==="paid"?(a(),i("div",re,[o[9]||(o[9]=e("div",{class:"h3 tw-font-bold tw-mb-1"},"Авиабилеты",-1)),o[10]||(o[10]=e("div",{class:"p2 tw-mb-6"},"Вы можете подгрузить сюда свои билеты",-1)),e("div",de,[u(H,{onFileLoad:k}),(a(!0),i(x,null,D(t(s).tickets,r=>(a(),f(H,{onDeleteFile:S,id:r.id,url:r.url??""},null,8,["id","url"]))),256))])])):l("",!0),e("div",ue,[t(s).status==="paid"&&t(s).chat_url?(a(),f(z,{key:0,theme:"border",onClick:o[0]||(o[0]=r=>U(t(s).chat_url))},{default:_(()=>[...o[11]||(o[11]=[y(" Перейти в чат путешествия ",-1)])]),_:1})):l("",!0),t(s).status==="waiting_review"?(a(),f(z,{key:1,onClick:o[1]||(o[1]=r=>M.value=!0)},{default:_(()=>[...o[12]||(o[12]=[y(" Оставить отзыв ",-1)])]),_:1})):l("",!0)]),t(s).status==="pending"&&t(s).payment_url?(a(),f(z,{key:2,onClick:o[2]||(o[2]=r=>t(Tt)().openURL(t(s).payment_url))},{default:_(()=>[...o[13]||(o[13]=[y(" Внести предоплату ",-1)])]),_:1})):l("",!0)])):l("",!0),t(h)==="local"?(a(),i("div",ce,[t(d).data?(a(),i(x,{key:0},[t(d).data.preview_stories.length>0?(a(),i("div",pe,[e("div",null,[o[15]||(o[15]=e("div",{class:"p1 tw-mb-3"},"Главные впечатления",-1)),e("div",null,[u(rt,{stories:t(d).data.preview_stories},null,8,["stories"])])])])):l("",!0),e("div",we,[o[17]||(o[17]=e("div",{class:"h3 tw-mb-3"},"Условия",-1)),e("div",_e,[u(et,{theme:"tw-bg-blue_bg",modelValue:t(m),"onUpdate:modelValue":o[3]||(o[3]=r=>B(m)?m.value=r:null),options:t(F),class:"tw-mb-6"},null,8,["modelValue","options"]),u(at,{modelValue:t(m),"onUpdate:modelValue":o[4]||(o[4]=r=>B(m)?m.value=r:null)},{default:_(()=>[u(I,{name:"prozhivanie",class:"tw-grid"},{default:_(()=>[e("div",me,[u(st,{hotels:t(d).data.hotels,class:"tw-mb-3"},null,8,["hotels"])]),t(d).data?.video_url?(a(),i("div",ve,[o[16]||(o[16]=e("div",{class:"p1"},"Обзорное видео",-1)),e("div",fe,[u(ot,{name:"play",class:"tw-w-10 tw-h-10 tw-absolute tw-top-1/2 tw-left-1/2 tw-transform -tw-translate-x-1/2 -tw-translate-y-1/2 tw-z-10"}),e("div",{class:"tw-absolute",innerHTML:t(d).data.video_url},null,8,be)])])):l("",!0)]),_:1}),u(I,{name:"pitanie",class:"tw-grid tw-gap-3"},{default:_(()=>[t(R)?(a(),f(Q,{key:0,service:t(R)},null,8,["service"])):l("",!0)]),_:1}),u(I,{name:"transport",class:"tw-grid tw-gap-3"},{default:_(()=>[t(V)?(a(),f(Q,{key:0,service:t(V)},null,8,["service"])):l("",!0)]),_:1})]),_:1},8,["modelValue"])])]),t(d).data.locations.length>0?(a(),i("div",ge,[o[18]||(o[18]=e("div",{class:"h3 tw-mb-6"},"Локации",-1)),e("ul",he,[(a(!0),i(x,null,D(t(d).data.locations,r=>(a(),i("li",null,g(r.name),1))),256))])])):l("",!0),t(d).data.additional_info.length>0?(a(),i("div",ye,[o[19]||(o[19]=e("div",{class:"h3 tw-mb-6"},"Дополнительно оплачивается",-1)),e("ul",ke,[(a(!0),i(x,null,D(t(d).data.additional_info,r=>(a(),i("li",null,g(r.name),1))),256))])])):l("",!0)],64)):l("",!0)])):l("",!0)])):l("",!0)]),t(d).data?(a(),f(nt,{key:0,modelValue:t(M),"onUpdate:modelValue":o[5]||(o[5]=r=>B(M)?M.value=r:null),direction__uuid:t(d).data.id,title:t(d).data.name},null,8,["modelValue","direction__uuid","title"])):l("",!0)]),_:1})}}});export{Qe as default};
