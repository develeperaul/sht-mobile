import{_ as F}from"./BaseIcon.vue_vue_type_script_setup_true_lang-Y1ZGA_hf.js";import{_ as Q}from"./CodeInput-DOZXPm6j.js";import{_ as U}from"./BaseButton-BEwq3IU_.js";import{_ as j}from"./BaseInput-obryhwg8.js";import{_ as q}from"./TopBlock.vue_vue_type_script_setup_true_lang-DsY5HcXd.js";import{Q as A}from"./QPage-CDrjN61Q.js";import{d as D,O as E,y as d,J as c,e as w,o as u,w as n,a as e,K as o,Q as f,c as B,M as l,f as s,t as J,a3 as K,aa as L,N as M}from"./index-Cu7ORWtZ.js";import{_ as O}from"./1000-BuxnlWti.js";import{a as P,r as z}from"./authStore-BLZq8dTd.js";import"./vee-validate-DgmE1SLv.js";import"./QSpinnerTail-Co0JQqD5.js";const G={class:"tw-container tw-grid tw-grid-rows-[auto_1fr]"},H={class:"tw-grid tw-gap-3"},W={class:"p1 tw-text-center"},X={class:"p2 tw-text-center"},Y={class:"p1 tw-text-center"},Z={key:2,class:"tw-grid tw-content-between tw-pb-10 tw-pt-10"},h={class:"card-white tw-grid tw-gap-[23px]"},tt={class:"tw-flex tw-justify-between tw-items-center tw-rounded-[100px] tw-border-blue_bg tw-border-[3px] tw-bg-blue_bg tw-font-normal tw-pl-3"},et={key:0,class:"popup"},st={class:"popup__wrapper"},ot={class:"tw-bg-white tw-py-8 tw-px-5 tw-rounded-32"},gt=D({__name:"Reg2",setup(nt){const b=E(),_=d(!1),r=d({name:"",phone:""}),i=d(1),C=d("1000START"),v=d(!0),T=async()=>{await z("+7"+r.value.phone)},V=async()=>{try{await T(),i.value=3}catch(p){if(p.response.status===409||p.response.status===404)_.value=!0;else throw p}},S=async p=>{try{await P().reg(r.value.name,"+7"+r.value.phone,p.kod),b.push({name:"home"})}catch(t){throw t}},x=d(!1);function $(){navigator.clipboard.writeText(C.value).then(()=>{x.value=!0,M.create({type:"positive",message:"Промо скопирован",position:"top"}),setTimeout(()=>{x.value=!1},1e3*10)})}return(p,t)=>{const N=q,k=j,g=c("router-link"),m=U,y=c("Form"),R=Q,I=F;return u(),w(A,{class:"tw-bg-blue_bg tw-grid"},{default:n(()=>[e("div",G,[o(N,{label:"Регистрация"}),l(i)===2?(u(),w(y,{key:0,onSubmit:V,class:"card-white tw-grid tw-gap-[23px] tw-mt-3 tw-content-start tw-h-fit"},{default:n(()=>[t[14]||(t[14]=e("div",{class:"h2 tw-text-center"},[s(" Введите имя "),e("br"),s(" и номер телефона ")],-1)),t[15]||(t[15]=e("div",{class:"p1 tw-text-center"},"Мы отправим код подтверждения",-1)),e("div",H,[o(k,{modelValue:l(r).name,"onUpdate:modelValue":t[0]||(t[0]=a=>l(r).name=a),name:"Имя",placeholder:"Имя",rules:"required"},null,8,["modelValue"]),o(k,{modelValue:l(r).phone,"onUpdate:modelValue":t[1]||(t[1]=a=>l(r).phone=a),name:"Телефон","un-mask":"",maska:"+7 (###)-###-##-##",placeholder:"Телефон",type:"tel",rules:"required"},null,8,["modelValue"])]),e("div",W,[t[9]||(t[9]=e("span",null," Нажимая на кнопку «Получить код», я принимаю условия ",-1)),o(g,{class:"link",to:{name:"sogl"}},{default:n(()=>[...t[7]||(t[7]=[s("Пользовательского соглашения",-1)])]),_:1}),t[10]||(t[10]=s(" и ",-1)),o(g,{class:"link",to:{name:"policy"}},{default:n(()=>[...t[8]||(t[8]=[s("Политику конфиденциальности",-1)])]),_:1})]),o(m,{type:"submit"},{default:n(()=>[...t[11]||(t[11]=[s(" Получить код ",-1)])]),_:1}),e("div",X,[t[13]||(t[13]=e("p",{class:"tw-text-gray_icon"},"Уже есть аккаунт?",-1)),o(g,{to:{name:"login"},class:"link"},{default:n(()=>[...t[12]||(t[12]=[s(" Войти ",-1)])]),_:1})])]),_:1})):f("",!0),l(i)===3?(u(),w(y,{key:1,class:"card-white tw-grid tw-gap-[23px] tw-mt-[32.5px] tw-content-start tw-h-fit",onSubmit:S},{default:n(()=>[t[19]||(t[19]=e("div",{class:"h2 tw-text-center"},"Введите СМС код",-1)),e("div",Y,[t[16]||(t[16]=s(" Мы отправили код на номер ",-1)),t[17]||(t[17]=e("br",null,null,-1)),s(" +7"+J(l(r).phone),1)]),o(R,{class:"tw-flex tw-justify-center",onFilled:t[2]||(t[2]=a=>v.value=!1),onUnfilled:t[3]||(t[3]=a=>v.value=!0)}),e("div",{onClick:t[4]||(t[4]=a=>i.value=1),class:"link p2 tw-text-center"}," Не получили код? "),o(m,{disabled:l(v)},{default:n(()=>[...t[18]||(t[18]=[s(" Отправить ",-1)])]),_:1},8,["disabled"])]),_:1})):f("",!0),l(i)===1?(u(),B("div",Z,[e("div",h,[t[22]||(t[22]=e("img",{src:O,width:"273",height:"99",alt:"",class:"tw-mx-auto"},null,-1)),t[23]||(t[23]=e("div",{class:"p1 tw-text-center"},[s(" Поздравляем! "),e("br"),e("br"),s(" Ваш промокод на 1000 рублей "),e("br"),s(" для первого заказа. "),e("br"),s(" Сохраните его и используйте, "),e("br"),s(" чтобы получить скидку. ")],-1)),e("div",tt,[t[21]||(t[21]=s(" 1000START ",-1)),e("div",{class:"tw-bg-geen_btn tw-flex tw-gap-[15px] tw-items-center tw-rounded-[100px] tw-shrink-0 tw-py-[15px] tw-px-6",onClick:$},[o(I,{name:"copy",class:"tw-w-6 tw-h-6"}),t[20]||(t[20]=s(" Скопировать ",-1))])])]),o(m,{onClick:t[5]||(t[5]=a=>i.value=2),theme:"black",class:""},{default:n(()=>[...t[24]||(t[24]=[s(" Далее ",-1)])]),_:1})])):f("",!0)]),(u(),w(K,{to:"body"},[o(L,{name:"fade"},{default:n(()=>[l(_)?(u(),B("div",et,[e("div",st,[e("div",ot,[t[26]||(t[26]=e("div",{class:"h2 tw-text-center tw-mb-4"}," У вас уже есть акккаунт ",-1)),t[27]||(t[27]=e("div",{class:"p1 tw-text-center tw-mb-4"}," Под этим номер уже зарегистрирован аккаунт, войдите в профиль или введите новый номер телефона ",-1)),o(m,{onClick:t[6]||(t[6]=a=>l(b).push({name:"login"})),class:""},{default:n(()=>[...t[25]||(t[25]=[s(" Войти ",-1)])]),_:1})])])])):f("",!0)]),_:1})]))]),_:1})}}});export{gt as default};
