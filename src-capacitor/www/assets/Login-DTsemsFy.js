import{_ as $}from"./CodeInput-DOZXPm6j.js";import{_ as F}from"./BaseButton-BEwq3IU_.js";import{_ as Q}from"./BaseInput-obryhwg8.js";import{_ as U}from"./TopBlock.vue_vue_type_script_setup_true_lang-DsY5HcXd.js";import{Q as R}from"./QPage-CDrjN61Q.js";import{d as j,O as q,y as a,J as b,e as w,o as u,w as o,a as e,K as n,Q as f,M as l,U as D,f as s,c as y,t as E,a3 as I,aa as J}from"./index-Cu7ORWtZ.js";import{a as K,b as L}from"./authStore-BLZq8dTd.js";import"./vee-validate-DgmE1SLv.js";import"./QSpinnerTail-Co0JQqD5.js";import"./BaseIcon.vue_vue_type_script_setup_true_lang-Y1ZGA_hf.js";const M={class:"tw-container"},O={class:"tw-grid tw-gap-3"},P={class:"p1 tw-text-center"},z={class:"p1 tw-text-center"},A={key:0,class:"tw-text-red p1 tw-text-center"},G={key:0,class:"popup"},H={class:"popup__wrapper"},W={class:"tw-bg-white tw-py-8 tw-px-5 tw-rounded-32"},rt=j({__name:"Login",setup(X){const c=q(),r=a(""),d=a(1);a("1234");const p=a(!0),x=a(!1),B=async()=>{await L("+7"+r.value)},C=async()=>{try{await B(),d.value=2}catch(i){if(i.response.status===409||i.response.status===404)x.value=!0;else throw i}},_=a(!1),V=async i=>{try{await K().auth("+7"+r.value,i.kod),c.push({name:"home"})}catch(t){if(t.response.status===500)_.value=!0;else throw t}};return a(!1),(i,t)=>{const S=U,N=Q,g=b("router-link"),v=F,k=b("Form"),T=$;return u(),w(R,{class:"tw-bg-blue_bg"},{default:o(()=>[e("div",M,[n(S,{label:"Вход в аккаунт"}),l(d)===1?(u(),w(k,{key:0,onSubmit:C,class:"card-white tw-grid tw-gap-[23px] tw-mt-3 tw-content-start"},{default:o(()=>[t[10]||(t[10]=e("div",{class:"h2 tw-text-center"},"Введите номер телефона",-1)),t[11]||(t[11]=e("div",{class:"p1 tw-text-center"},"Мы отправим код подтверждения",-1)),e("div",O,[n(N,{modelValue:l(r),"onUpdate:modelValue":t[0]||(t[0]=m=>D(r)?r.value=m:null),name:"Телефон","un-mask":"",maska:"+7 (###)-###-##-##",placeholder:"Телефон",type:"tel",rules:"required"},null,8,["modelValue"])]),e("div",P,[t[7]||(t[7]=e("span",null,[s(" Нажимая на кнопку «Получить код», "),e("br"),s(" я принимаю условия ")],-1)),n(g,{class:"link",to:{name:"sogl"}},{default:o(()=>[...t[5]||(t[5]=[s("Пользовательского соглашения",-1)])]),_:1}),t[8]||(t[8]=s(" и ",-1)),n(g,{class:"link",to:{name:"policy"}},{default:o(()=>[...t[6]||(t[6]=[s("Политику конфиденциальности",-1)])]),_:1})]),n(v,null,{default:o(()=>[...t[9]||(t[9]=[s(" Получить код ",-1)])]),_:1})]),_:1})):f("",!0),l(d)===2?(u(),w(k,{key:1,class:"card-white tw-grid tw-gap-[23px] tw-mt-[32.5px]",onSubmit:V},{default:o(()=>[t[15]||(t[15]=e("div",{class:"h2 tw-text-center"},"Введите СМС код",-1)),e("div",z,[t[12]||(t[12]=s(" Мы отправили код на номер ",-1)),t[13]||(t[13]=e("br",null,null,-1)),s(" +7"+E(l(r)),1)]),l(_)&&!l(p)?(u(),y("div",A," Код некорректный, попробуйте снова ")):f("",!0),n(T,{class:"tw-flex tw-justify-center",onFilled:t[1]||(t[1]=()=>(_.value=!1,p.value=!1)),onUnfilled:t[2]||(t[2]=m=>p.value=!0)}),e("div",{onClick:t[3]||(t[3]=m=>d.value=1),class:"link p2 tw-text-center"}," Не получили код? "),n(v,{disabled:l(p)},{default:o(()=>[...t[14]||(t[14]=[s(" Отправить ",-1)])]),_:1},8,["disabled"])]),_:1})):f("",!0)]),(u(),w(I,{to:"body"},[n(J,{name:"fade"},{default:o(()=>[l(x)?(u(),y("div",G,[e("div",H,[e("div",W,[t[17]||(t[17]=e("div",{class:"h2 tw-text-center tw-mb-4"},"У вас нет акккаунта",-1)),t[18]||(t[18]=e("div",{class:"p1 tw-text-center tw-mb-4"}," Под этим номер не зарегистрирован аккаунт, зарегистрируйтесь или введите новый номер телефона ",-1)),n(v,{onClick:t[4]||(t[4]=m=>l(c).push({name:"reg"})),class:""},{default:o(()=>[...t[16]||(t[16]=[s(" Зарегистрироваться ",-1)])]),_:1})])])])):f("",!0)]),_:1})]))]),_:1})}}});export{rt as default};
